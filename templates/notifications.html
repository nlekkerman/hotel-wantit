{% extends 'base.html' %}
{% load static %}

{% block title %}
    <title>Notifications</title>
{% endblock %}

{% block content %}
    <h1>Notifications</h1>
    
    <!-- Display reservations -->
    <div class="notification-reservations">
        <h2>Reservations</h2>
        <ul>
            {% for reservation in user_reservations %}
            <li>
                <a href="#" onclick="openModal('modal_{{ reservation.id }}')">{{ reservation }}</a>
            </li>
            {% empty %}
            <li>No reservations found.</li>
            {% endfor %}
        </ul>
    </div>
    
    <!-- Display pending reviews -->
    <div class="notification-reviews">
        <h2>Pending Reviews</h2>
        <ul>
            {% for review in user_pending_reviews %}
            <li>{{ review }}</li>
            {% empty %}
            <li>No pending reviews found.</li>
            {% endfor %}
        </ul>
    </div>
    
    <!-- Display pending comments -->
    <div class="notification-comments">
        <h2>Pending Comments</h2>
        <ul>
            {% for comment in user_pending_comments %}
            <li>{{ comment }}</li>
            {% empty %}
            <li>No pending comments found.</li>
            {% endfor %}
        </ul>
    </div>

    <!-- Modal for reservation details -->
    {% for reservation in user_reservations %}
    <div id="modal_{{ reservation.id }}" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('modal_{{ reservation.id }}')">&times;</span>
            <h2>Reservation Details</h2>
            <p><strong>ID:</strong> {{ reservation.id }}</p>
            <p><strong>Check-in Date:</strong> {{ reservation.checkin_date }}</p>
            <p><strong>Check-out Date:</strong> {{ reservation.checkout_date }}</p>
            <!-- Add more details as needed -->
        </div>
    </div>
    {% endfor %}

    <!-- JavaScript for modal behavior -->
    <script>
        // Function to open modal
        function openModal(modalId) {
            var modal = document.getElementById(modalId);
            modal.style.display = "block";
        }

        // Function to close modal
        function closeModal(modalId) {
            var modal = document.getElementById(modalId);
            modal.style.display = "none";
        }

        // Close the modal when clicking outside of it
        window.onclick = function(event) {
            var modals = document.getElementsByClassName('modal');
            for (var i = 0; i < modals.length; i++) {
                if (event.target == modals[i]) {
                    modals[i].style.display = "none";
                }
            }
        }
    </script>
{% endblock %}
