{% extends 'base.html' %}
{% load static %}

{% block title %}
<title>Notifications</title>
{% endblock %}

{% block content %}

<div class="notifications-container">
    <h1 class="notification-title">Notifications</h1>

    <!-- Display reservations -->
    <div class="notification-section">
        <h2>Reservations</h2>
        <ul class="notification-list">
            {% for reservation in user_reservations %}
            <li>
                <a href="{% url 'reservation_detail' reservation.id %}">{{ reservation }}</a>
            </li>
            {% endfor %}
        </ul>
    </div>

    <!-- Display pending reviews -->
    <div class="notification-section">
        <h2>Pending Reviews</h2>
        <ul class="notification-list">
            {% for review in user_pending_reviews %}
            <li>
                <a href="#" onclick="openModal('modal_review_{{ review.id }}')">{{ review.review }}</a>
            </li>
            {% empty %}
            <li>No pending reviews found.</li>
            {% endfor %}
        </ul>
    </div>

    <!-- Display pending comments -->
    <div class="notification-section">
        <h2>Pending Comments</h2>
        <ul class="notification-list">
            {% for comment in user_pending_comments %}
            <li>
                <a href="#" onclick="openModal('modal_comment_{{ comment.id }}')">{{ comment.text }}</a>
            </li>
            {% empty %}
            <li>No pending comments found.</li>
            {% endfor %}
        </ul>
    </div>

    <!-- Modals for reviews -->
    {% for review in user_pending_reviews %}
    <div id="modal_review_{{ review.id }}" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('modal_review_{{ review.id }}')">&times;</span>
            <h2>Pending Review</h2>
            <p><strong>User:</strong> {{ review.user.username }}</p>
            <p><strong>Rating:</strong> {{ review.rating }}</p>
            <p><strong>Review:</strong> {{ review.review }}</p>
            <!-- Add more details as needed -->
        </div>
    </div>
    {% endfor %}

    <!-- Modals for comments -->
    {% for comment in user_pending_comments %}
    <div id="modal_comment_{{ comment.id }}" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('modal_comment_{{ comment.id }}')">&times;</span>
            <h2>Pending Comment</h2>
            <p><strong>User:</strong> {{ comment.user.username }}</p>
            <p><strong>Comment:</strong> {{ comment.text }}</p>
            <!-- Add more details as needed -->
        </div>
    </div>
    {% endfor %}
</div>

<!-- JavaScript for modal behavior -->
<script>
    // Function to open modal
    function openModal(modalId) {
        var modal = document.getElementById(modalId);
        modal.style.display = "block";
    }

    // Function to close modal
    function closeModal(modalId) {
        var modal = document.getElementById(modalId);
        modal.style.display = "none";
    }

    // Close the modal when clicking outside of it
    window.onclick = function (event) {
        var modals = document.getElementsByClassName('modal');
        for (var i = 0; i < modals.length; i++) {
            if (event.target == modals[i]) {
                modals[i].style.display = "none";
            }
        }
    }
</script>
{% endblock %}
